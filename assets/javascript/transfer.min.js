function loadThisPage(){$('[class="playerName"]:visible').each(function(){this.setAttribute("onClick","openPlayerInfo(this.id, event);")}),document.getElementById("freeAgentTradeButton").setAttribute("onclick","makeFreeAgentTrade()"),document.getElementById("selectPremTeam").setAttribute("onChange","changePage(1)"),document.getElementById("selectPosition").setAttribute("onChange","changePage(1)"),document.getElementById("selectName").setAttribute("onKeyUp","changePage(1)")}function addToTradeIn(e){var t=e.substr(5),n=document.getElementById("playersInTable").getElementsByTagName("tbody")[0],i=document.getElementById("row"+t);if(i);else{playersInArray.push(t);var o=document.getElementById("position"+t).innerHTML;"GK"==o?(gksInArray.push(t),gkIn++):"DF"==o?(dfsInArray.push(t),dfIn++):"MF"==o?(mfsInArray.push(t),mfIn++):"FW"==o&&(fwsInArray.push(t),fwIn++);var a=n.insertRow(n.rows.length);a.setAttribute("id","row"+t);var r=a.insertCell(0),s=a.insertCell(1),l=a.insertCell(2),d=document.createTextNode(o),c=document.createElement("P"),u=document.createTextNode(document.getElementById(t).innerHTML);c.appendChild(u),c.setAttribute("class","playerName"),c.setAttribute("id",t),c.setAttribute("onclick","openPlayerInfo(this.id, event);");var y=document.createElement("BUTTON"),g=document.createTextNode("X");y.appendChild(g),y.setAttribute("class","tradeButton"),y.setAttribute("id","button"+t),y.setAttribute("onclick","removeFromTable(this.id);"),r.appendChild(d),s.appendChild(c),l.appendChild(y)}}function addToTradeOut(e){var t=e.substr(5),n=document.getElementById("playersOutTable").getElementsByTagName("tbody")[0],i=document.getElementById("row"+t);if(i);else{playersOutArray.push(t);var o=document.getElementById("position"+t).innerHTML;"GK"==o?(gksOutArray.push(t),gkOut++):"DF"==o?(dfsOutArray.push(t),dfOut++):"MF"==o?(mfsOutArray.push(t),mfOut++):"FW"==o&&(fwsOutArray.push(t),fwOut++);var a=n.insertRow(n.rows.length);a.setAttribute("id","row"+t);var r=a.insertCell(0),s=a.insertCell(1),l=a.insertCell(2),d=document.createTextNode(document.getElementById("position"+t).innerHTML),c=document.createElement("P"),u=document.createTextNode(document.getElementById(t).innerHTML);c.appendChild(u),c.setAttribute("class","playerName"),c.setAttribute("id",t),c.setAttribute("onclick","openPlayerInfo(this.id, event);");var y=document.createElement("BUTTON"),g=document.createTextNode("X");y.appendChild(g),y.setAttribute("class","tradeButton"),y.setAttribute("id","button"+t),y.setAttribute("onclick","removeFromTable(this.id);"),r.appendChild(d),s.appendChild(c),l.appendChild(y)}}function removeFromTable(e){var t=e.substr(6),n=playersInArray.indexOf(t);if(n>-1){playersInArray.splice(n,1);var i=document.getElementById("position"+t).innerHTML;if("GK"==i){var o=gksInArray.indexOf(t);gksInArray.splice(o,1),gkIn--}else if("DF"==i){var o=dfsInArray.indexOf(t);dfsInArray.splice(o,1),dfIn--}else if("MF"==i){var o=mfsInArray.indexOf(t);mfsInArray.splice(o,1),mfIn--}else if("FW"==i){var o=fwsInArray.indexOf(t);fwsInArray.splice(o,1),fwIn--}}var a=playersOutArray.indexOf(t);if(a>-1){playersOutArray.splice(a,1);var i=document.getElementById("position"+t).innerHTML;if("GK"==i){var o=gksOutArray.indexOf(t);gksOutArray.splice(o,1),gkOut--}else if("DF"==i){var o=dfsOutArray.indexOf(t);dfsOutArray.splice(o,1),dfOut--}else if("MF"==i){var o=mfsOutArray.indexOf(t);mfsOutArray.splice(o,1),mfOut--}else if("FW"==i){var o=fwsOutArray.indexOf(t);fwsOutArray.splice(o,1),fwOut--}}var t=e.substr(6),r=document.getElementById("row"+t);r.parentNode.removeChild(r)}function makeFreeAgentTrade(){if(0==playersInArray.length&&0==playersOutArray.length)document.getElementById("freeAgentTradeAlert").innerHTML="Add players to transfer",document.getElementById("freeAgentTradeAlert").style.display="block";else if(gkIn==gkOut&&dfIn==dfOut&&mfIn==mfOut&&fwIn==fwOut){for(var e="",t="",n=1,i=1,o=gksInArray.length,a=0;o>a;a++)e=e+"&playerIn"+n+"="+gksInArray[a],n++;for(var r=dfsInArray.length,a=0;r>a;a++)e=e+"&playerIn"+n+"="+dfsInArray[a],n++;for(var s=mfsInArray.length,a=0;s>a;a++)e=e+"&playerIn"+n+"="+mfsInArray[a],n++;for(var l=fwsInArray.length,a=0;l>a;a++)e=e+"&playerIn"+n+"="+fwsInArray[a],n++;for(var d=gksOutArray.length,a=0;d>a;a++)t=t+"&playerOut"+i+"="+gksOutArray[a],i++;for(var c=dfsOutArray.length,a=0;c>a;a++)t=t+"&playerOut"+i+"="+dfsOutArray[a],i++;for(var u=mfsOutArray.length,a=0;u>a;a++)t=t+"&playerOut"+i+"="+mfsOutArray[a],i++;for(var y=fwsOutArray.length,a=0;y>a;a++)t=t+"&playerOut"+i+"="+fwsOutArray[a],i++;document.getElementById("freeAgentTradeAlert").style.display="none";var g;g=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),g.onreadystatechange=function(){4==g.readyState&&200==g.status&&(document.location.href=g.responseText)},g.open("GET","index.php?freeAgentsTrade=true"+e+t+"&squadid="+GETARRAY.squadid+"&leagueid="+GETARRAY.leagueid,!0),g.send()}else document.getElementById("freeAgentTradeAlert").innerHTML="Must have equal players per position",document.getElementById("freeAgentTradeAlert").style.display="block"}function changePage(e){var t="<tr><th>Trade</th><th>Pos</th><th>Player</th><th>Team</th><th>TP</th></tr>",n=document.getElementById("selectPosition").value,i=document.getElementById("selectPremTeam").value;if(""==document.getElementById("selectName").value)var o="Any";else var o=document.getElementById("selectName").value;var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(document.getElementById("freeAgentsTable").innerHTML=t+a.responseText,loadThisPage())},a.open("GET","index.php?getFreeAgents=true&page="+e+"&position="+n+"&premTeam="+i+"&name="+o+"&squadid="+GETARRAY.squadid,!0),a.send()}var GETARRAY={};if(-1!==document.location.toString().indexOf("?"))for(var query=document.location.toString().replace(/^.*?\?/,"").replace(/#.*$/,"").split("&"),i=0,l=query.length;l>i;i++){var aux=decodeURIComponent(query[i]).split("=");GETARRAY[aux[0]]=aux[1]}var playersInArray=[],playersOutArray=[],gksInArray=[],dfsInArray=[],mfsInArray=[],fwsInArray=[],gksOutArray=[],dfsOutArray=[],mfsOutArray=[],fwsOutArray=[],gkIn=0,gkOut=0,dfIn=0,dfOut=0,mfIn=0,mfOut=0,fwIn=0,fwOut=0;