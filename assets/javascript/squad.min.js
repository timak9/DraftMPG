function loadThisPage(){$('*[id*="Goalkeeper"]:visible').each(function(){this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Defender"]:visible').each(function(){this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Midfielder"]:visible').each(function(){this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Forward"]:visible').each(function(){this.setAttribute("onClick","chooseSub(this.id);")}),$('[class="name"]:visible').each(function(){this.setAttribute("onClick","openPlayerInfo(this.id, event);")})}function chooseSub(e){var i=($("#gk .player").length,$("#df .player").length),o=$("#mf .player").length,s=$("#str .player").length,n=e.substring(0,1);if("G"==n){var r=e.substring(10);idHolder=r;var e=e.substring(0,10);$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")})}else if("D"==n){var l=document.getElementById(""+e).parentNode.parentNode.id,r=e.substring(8);idHolder=r;var e=e.substring(0,8);"reserves"==l?($('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")})):"bench"==l?($('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){2!=o&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Forward"]:visible').each(function(){1!=s&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),this.parentNode.parentNode.id==l&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);"))})):"pitch"==l&&($('*[id*="Defender"]:visible').each(function(){this.parentNode.parentNode.id!=l?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):this.parentNode.parentNode.id==l&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&i>3?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Forward"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&i>3?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}))}else if("M"==n){var l=document.getElementById(""+e).parentNode.parentNode.id,r=e.substring(10);idHolder=r;var e=e.substring(0,10);"reserves"==l?($('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")})):"bench"==l?($('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){i>3&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),this.parentNode.parentNode.id==l&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);"))}),$('*[id*="Forward"]:visible').each(function(){s>1&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),this.parentNode.parentNode.id==l&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);"))})):"pitch"==l&&($('*[id*="Midfielder"]:visible').each(function(){this.parentNode.parentNode.id!=l?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):this.parentNode.parentNode.id==l&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&o>2&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")),(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Forward"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&o>2?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}))}else{var l=document.getElementById(""+e).parentNode.parentNode.id,r=e.substring(7);idHolder=r;var e=e.substring(0,7);"reserves"==l?($('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")})):"bench"==l?($('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){i>3&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),this.parentNode.parentNode.id==l&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);"))}),$('*[id*="Midfielder"]:visible').each(function(){o>2&&"reserves"!=this.parentNode.parentNode.id?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),this.parentNode.parentNode.id==l&&(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);"))})):"pitch"==l&&($('*[id*="Forward"]:visible').each(function(){this.parentNode.parentNode.id!=l?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):this.parentNode.parentNode.id==l&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&s>1?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}),$('*[id*="Midfielder"]:visible').each(function(){this.parentNode.parentNode.id!=l&&"reserves"!=this.parentNode.parentNode.id&&s>1?(this.style.backgroundColor="orange",this.style.opacity="0.7",this.setAttribute("onClick","makeSub(this.id, idHolder);")):(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;")),(this.parentNode.parentNode.id==l||"reserves"==this.parentNode.parentNode.id)&&(this.style.backgroundColor="none",this.style.opacity="1",this.setAttribute("onClick","none;"))}))}$("#"+e+r).css("background-color","indigo"),$("#"+e+r).css("opacity","0.8"),document.getElementById(""+e+r).setAttribute("onClick","cancelSub();")}function cancelSub(){$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","chooseSub(this.id);")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","chooseSub(this.id);")})}function makeSub(e,t){for(var i="squadid",o="Not found",s=[],n=location.search.substr(1).split("&"),r=0;r<n.length;r++)s=n[r].split("="),s[0]===i&&(o=decodeURIComponent(s[1]));var l=e.substring(0,1);e="G"==l?e.substring(10):"D"==l?e.substring(8):"M"==l?e.substring(10):e.substring(7);var d;d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d.onreadystatechange=function(){4==d.readyState&&200==d.status&&(document.getElementById("wrapper").innerHTML=d.responseText,loadThisPage())},d.open("GET","index.php?makeSub=true&pl1="+e+"&pl2="+t+"&squadid="+o,!0),d.send()}function removePlayersOnClick(){$('*[id*="Goalkeeper"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Defender"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Midfielder"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('*[id*="Forward"]:visible').each(function(){this.style.backgroundColor="inherit",this.style.opacity="1",this.setAttribute("onClick","none;")}),$('[class="name"]:visible').each(function(){this.setAttribute("onClick","none;")})}var idHolder=0;
