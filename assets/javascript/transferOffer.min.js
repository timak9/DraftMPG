function loadThisPage(){$('[class="playerName"]:visible').each(function(){this.setAttribute("onClick","openPlayerInfo(this.id, event);")}),document.getElementById("offerTradeButton").setAttribute("onclick","makeTradeOffer()")}function addToTradeIn(e){var t=e.substr(5),n=document.getElementById("playersInTable").getElementsByTagName("tbody")[0],i=document.getElementById("row"+t);if(i);else{playersInArray.push(t);var r=document.getElementById("position"+t).innerHTML;"GK"==r?(gksInArray.push(t),gkIn++):"DF"==r?(dfsInArray.push(t),dfIn++):"MF"==r?(mfsInArray.push(t),mfIn++):"FW"==r&&(fwsInArray.push(t),fwIn++);var a=n.insertRow(n.rows.length);a.setAttribute("id","row"+t);var o=a.insertCell(0),s=a.insertCell(1),l=a.insertCell(2),d=document.createTextNode(r),u=document.createElement("P"),c=document.createTextNode(document.getElementById(t).innerHTML);u.appendChild(c),u.setAttribute("class","playerName"),u.setAttribute("id",t),u.setAttribute("onclick","openPlayerInfo(this.id, event);");var y=document.createElement("BUTTON"),m=document.createTextNode("X");y.appendChild(m),y.setAttribute("class","tradeButton"),y.setAttribute("id","button"+t),y.setAttribute("onclick","removeFromTable(this.id);"),o.appendChild(d),s.appendChild(u),l.appendChild(y)}}function addToTradeOut(e){var t=e.substr(5),n=document.getElementById("playersOutTable").getElementsByTagName("tbody")[0],i=document.getElementById("row"+t);if(i);else{playersOutArray.push(t);var r=document.getElementById("position"+t).innerHTML;"GK"==r?(gksOutArray.push(t),gkOut++):"DF"==r?(dfsOutArray.push(t),dfOut++):"MF"==r?(mfsOutArray.push(t),mfOut++):"FW"==r&&(fwsOutArray.push(t),fwOut++);var a=n.insertRow(n.rows.length);a.setAttribute("id","row"+t);var o=a.insertCell(0),s=a.insertCell(1),l=a.insertCell(2),d=document.createTextNode(document.getElementById("position"+t).innerHTML),u=document.createElement("P"),c=document.createTextNode(document.getElementById(t).innerHTML);u.appendChild(c),u.setAttribute("class","playerName"),u.setAttribute("id",t),u.setAttribute("onclick","openPlayerInfo(this.id, event);");var y=document.createElement("BUTTON"),m=document.createTextNode("X");y.appendChild(m),y.setAttribute("class","tradeButton"),y.setAttribute("id","button"+t),y.setAttribute("onclick","removeFromTable(this.id);"),o.appendChild(d),s.appendChild(u),l.appendChild(y)}}function removeFromTable(e){var t=e.substr(6),n=playersInArray.indexOf(t);if(n>-1){playersInArray.splice(n,1);var i=document.getElementById("position"+t).innerHTML;if("GK"==i){var r=gksInArray.indexOf(t);gksInArray.splice(r,1),gkIn--}else if("DF"==i){var r=dfsInArray.indexOf(t);dfsInArray.splice(r,1),dfIn--}else if("MF"==i){var r=mfsInArray.indexOf(t);mfsInArray.splice(r,1),mfIn--}else if("FW"==i){var r=fwsInArray.indexOf(t);fwsInArray.splice(r,1),fwIn--}}var a=playersOutArray.indexOf(t);if(a>-1){playersOutArray.splice(a,1);var i=document.getElementById("position"+t).innerHTML;if("GK"==i){var r=gksOutArray.indexOf(t);gksOutArray.splice(r,1),gkOut--}else if("DF"==i){var r=dfsOutArray.indexOf(t);dfsOutArray.splice(r,1),dfOut--}else if("MF"==i){var r=mfsOutArray.indexOf(t);mfsOutArray.splice(r,1),mfOut--}else if("FW"==i){var r=fwsOutArray.indexOf(t);fwsOutArray.splice(r,1),fwOut--}}var t=e.substr(6),o=document.getElementById("row"+t);o.parentNode.removeChild(o)}function changeOppositionTeam(e){var n,t="<tr><th>Trade</th><th>Pos</th><th>Player</th><th>Team</th><th>TP</th></tr>";n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(document.getElementById("oppositionTeamTable").innerHTML=t+n.responseText,loadThisPage())},document.getElementById("oppositionTeamTable").innerHTML='<p id="">Loading Squad...</p></div><img id="" src="assets/images/layOutPics/loading.gif">',gkIn=0,dfIn=0,mfIn=0,fwIn=0,gksInArray=[],dfsInArray=[],mfsInArray=[],fwsInArray=[],$("#playersInTable tr").remove(),n.open("GET","index.php?getOppositionTeam=true&teamId="+e,!0),n.send()}function makeTradeOffer(){var e=document.getElementById("oppositionTeamSelect"),t=e.options[e.selectedIndex].value;if(0==playersInArray.length&&0==playersOutArray.length)document.getElementById("freeAgentTradeAlert").innerHTML="Add players to transfer",document.getElementById("freeAgentTradeAlert").style.display="block";else if(gkIn==gkOut&&dfIn==dfOut&&mfIn==mfOut&&fwIn==fwOut){for(var n="",i="",r=1,a=1,o=gksInArray.length,s=0;o>s;s++)n=n+"&playerIn"+r+"="+gksInArray[s],r++;for(var l=dfsInArray.length,s=0;l>s;s++)n=n+"&playerIn"+r+"="+dfsInArray[s],r++;for(var d=mfsInArray.length,s=0;d>s;s++)n=n+"&playerIn"+r+"="+mfsInArray[s],r++;for(var u=fwsInArray.length,s=0;u>s;s++)n=n+"&playerIn"+r+"="+fwsInArray[s],r++;for(var c=gksOutArray.length,s=0;c>s;s++)i=i+"&playerOut"+a+"="+gksOutArray[s],a++;for(var y=dfsOutArray.length,s=0;y>s;s++)i=i+"&playerOut"+a+"="+dfsOutArray[s],a++;for(var m=mfsOutArray.length,s=0;m>s;s++)i=i+"&playerOut"+a+"="+mfsOutArray[s],a++;for(var g=fwsOutArray.length,s=0;g>s;s++)i=i+"&playerOut"+a+"="+fwsOutArray[s],a++;document.getElementById("freeAgentTradeAlert").style.display="none";var p;p=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),p.onreadystatechange=function(){4==p.readyState&&200==p.status&&(document.location.href=p.responseText)},p.open("GET","index.php?offerTrade=true"+n+i+"&squadid="+GETARRAY.squadid+"&opTeam="+t,!0),p.send()}else document.getElementById("freeAgentTradeAlert").innerHTML="Must have equal players per position",document.getElementById("freeAgentTradeAlert").style.display="block"}var GETARRAY={};if(-1!==document.location.toString().indexOf("?"))for(var query=document.location.toString().replace(/^.*?\?/,"").replace(/#.*$/,"").split("&"),i=0,l=query.length;l>i;i++){var aux=decodeURIComponent(query[i]).split("=");GETARRAY[aux[0]]=aux[1]}var playersInArray=[],playersOutArray=[],gksInArray=[],dfsInArray=[],mfsInArray=[],fwsInArray=[],gksOutArray=[],dfsOutArray=[],mfsOutArray=[],fwsOutArray=[],gkIn=0,gkOut=0,dfIn=0,dfOut=0,mfIn=0,mfOut=0,fwIn=0,fwOut=0;